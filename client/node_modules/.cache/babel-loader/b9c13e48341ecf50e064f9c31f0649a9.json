{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\david\\\\react\\\\RateCourses\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Button,Modal,TextArea,Form}from'semantic-ui-react';import Input from\"./Input\";import\"./Edit.css\";import axios from\"axios\";import Forms from\"./Form\";var validator=require(\"email-validator\");var swearjar=require('swearjar-extended');var ModalExampleCloseConfig=/*#__PURE__*/function(_Component){_inherits(ModalExampleCloseConfig,_Component);var _super=_createSuper(ModalExampleCloseConfig);function ModalExampleCloseConfig(){var _this;_classCallCheck(this,ModalExampleCloseConfig);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={queried:false,open:false,message:false,code:\"\",tbval:_this.props.data.isTextBook,eval:_this.props.data.email,dval:_this.props.data.difficulty,taval:_this.props.takeAgain,aval:_this.props.data.body,uval:_this.props.data.useful,up:_this.props.data.thumbsUp,down:_this.props.data.thumbsDown,id:_this.props.id,error:0,sent:false,Profanity:false};_this.email=function(e){_this.setState({eval:e});};_this.TextBook=function(term){_this.setState({tbval:term});};_this.useful=function(term){_this.setState({uval:term});};_this.Difficulty=function(term){_this.setState({dval:term});};_this.TakeAgain=function(term){_this.setState({taval:term});};_this.About=function(term){_this.setState({aval:term});};_this.codeChange=function(codeType){_this.setState({code:codeType});};_this.closeConfigShow=function(closeOnEscape,closeOnDimmerClick){return function(){_this.setState({closeOnEscape:closeOnEscape,closeOnDimmerClick:closeOnDimmerClick,open:true});};};_this.ResetProfanity=function(){_this.setState({Profanity:false});};_this.send=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var profanity;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:profanity=swearjar.profane(_this.state.aval);_this.setState({Profanity:profanity});if(_this.state.aval.length>600){_this.setState({error:1});}if(_this.state.aval.length<=600){_this.setState({error:0});}console.log(_this.state.Profanity);console.log(profanity);_this.setState({Profanity:profanity,error:_this.state.aval.length>600?1:0},function(){if(!_this.state.Profanity&&_this.state.error==0){var list={\"body\":_this.state.aval,\"email\":_this.state.eval,\"difficulty\":_this.state.dval,\"takeAgain\":_this.state.taval,\"isTextBook\":_this.state.tbval,\"thumbsUp\":_this.state.up,\"thumbsDown\":_this.state.down,\"id\":_this.state.id,\"useful\":_this.state.uval};_this.sendEdit(list);console.log(\"this happened\");_this.props.updateState(list);_this.close();}});case 7:case\"end\":return _context.stop();}}},_callee);}));_this.sendEdit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(list){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('/edit',{params:{courseTitle:_this.props.Title,review:list,id:_this.state.id}});case 2:res=_context2.sent;case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}();_this.sendFeedback=function(templateId,variables){window.emailjs.send('gmail',templateId,variables).then(function(res){console.log('Email successfully sent!');})// Handle errors here however you like, or use a React error boundary\n.catch(function(err){return console.error('Oh well, you failed. Here some thoughts on the error that occured:',err);});};_this.SendEmail=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res,templateId;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return axios.get('/findid',{params:{courseTitle:_this.props.Title,id:_this.state.id}});case 2:res=_context3.sent;console.log(\"email would have sent\");templateId='template_swHMraBb';_this.sendFeedback(templateId,{message_html:_this.state.id,from_name:\"David\",reply_to:res.data});_this.setState({sent:true});// Here you need to send some kind of message, so that it says \"email sent sucessfully\"\ncase 7:case\"end\":return _context3.stop();}}},_callee3);}));_this.close=function(){return _this.setState({open:false,message:false,error:0,sent:false});};_this.Submitclose=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(_this.state.code==_this.props.id){_this.setState({message:true});}else{// Here you need to add logic to make it display some kind of error\n//\n_this.setState({error:1});}case 1:case\"end\":return _context4.stop();}}},_callee4);}));_this.renderButton=function(){if(_this.state.sent){return;}if(_this.state.message){return/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(Button,{onClick:_this.send,positive:true,labelPosition:\"right\",icon:\"checkmark\",content:\"Submit\"}));}if(!_this.state.message){return/*#__PURE__*/React.createElement(Modal.Actions,null,/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(Button,{id:\"SWAG\",onClick:_this.Submitclose,positive:true,labelPosition:\"right\",icon:\"checkmark\",content:\"Submit\"}),/*#__PURE__*/React.createElement(Button,{onClick:_this.SendEmail,id:\"SWAG\",yellow:true,labelPosition:\"right\",icon:\"question circle outline\",content:\"Forgot Code?\"})));}};_this.renderModal=function(){if(_this.state.sent){return/*#__PURE__*/React.createElement(Modal.Content,null,\"Your edit code has been sent to your email!\");}if(_this.state.message){return/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Forms,{tbval:_this.props.data.isTextBook,dval:_this.props.data.difficulty,taval:_this.props.data.takeAgain,eval:_this.props.data.email,aval:_this.props.data.body,uval:_this.props.data.useful,email:_this.email,useful:_this.useful,TextBook:_this.TextBook,Difficulty:_this.Difficulty,TakeAgain:_this.TakeAgain,About:_this.About,Profanity:_this.state.Profanity,Error:_this.state.error,ResetProfanity:_this.ResetProfanity}));}if(_this.state.open){return/*#__PURE__*/React.createElement(Modal.Content,null,/*#__PURE__*/React.createElement(Form,null,/*#__PURE__*/React.createElement(\"center\",null,/*#__PURE__*/React.createElement(Input,{error:_this.state.error,codeChange:_this.codeChange}))));}};return _this;}_createClass(ModalExampleCloseConfig,[{key:\"render\",value:function render(){var _this$state=this.state,open=_this$state.open,closeOnEscape=_this$state.closeOnEscape,closeOnDimmerClick=_this$state.closeOnDimmerClick;if(this.props.on==true){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"i\",{onClick:this.closeConfigShow(false,true),class:\"pencil alternate icon large\"}),/*#__PURE__*/React.createElement(Modal,{className:\"edit\",open:open,closeOnEscape:closeOnEscape,closeOnDimmerClick:closeOnDimmerClick,onClose:this.close},/*#__PURE__*/React.createElement(Modal.Header,null,\"  \",/*#__PURE__*/React.createElement(\"center\",null,\" Edit Post: Provide Edit Code! \"),\" \"),this.renderModal(),this.renderButton()));}return/*#__PURE__*/React.createElement(\"i\",{class:\" large pen square  icon large \"});}}]);return ModalExampleCloseConfig;}(Component);export default ModalExampleCloseConfig;","map":{"version":3,"sources":["C:/Users/david/react/RateCourses/client/src/Components/Edit.js"],"names":["React","Component","Button","Modal","TextArea","Form","Input","axios","Forms","validator","require","swearjar","ModalExampleCloseConfig","state","queried","open","message","code","tbval","props","data","isTextBook","eval","email","dval","difficulty","taval","takeAgain","aval","body","uval","useful","up","thumbsUp","down","thumbsDown","id","error","sent","Profanity","e","setState","TextBook","term","Difficulty","TakeAgain","About","codeChange","codeType","closeConfigShow","closeOnEscape","closeOnDimmerClick","ResetProfanity","send","profanity","profane","length","console","log","list","sendEdit","updateState","close","get","params","courseTitle","Title","review","res","sendFeedback","templateId","variables","window","emailjs","then","catch","err","SendEmail","message_html","from_name","reply_to","Submitclose","renderButton","renderModal","on"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Button, Modal, TextArea, Form } from 'semantic-ui-react'\r\nimport Input from \"./Input\"\r\nimport \"./Edit.css\";\r\nimport axios from \"axios\"\r\nimport Forms from \"./Form\"\r\nvar validator = require(\"email-validator\");\r\nvar swearjar = require('swearjar-extended');\r\n\r\nclass ModalExampleCloseConfig extends Component {\r\n  state = { \r\n      queried:false, \r\n      open: false,\r\n      message:false,\r\n      code:\"\",\r\n      tbval:this.props.data.isTextBook,\r\n      eval:this.props.data.email,\r\n      dval:this.props.data.difficulty,\r\n      taval:this.props.takeAgain, \r\n      aval:this.props.data.body,\r\n      uval:this.props.data.useful,\r\n      up:this.props.data.thumbsUp,\r\n      down:this.props.data.thumbsDown,\r\n      id:this.props.id,\r\n      error:0, \r\n      sent:false,\r\n      Profanity:false,\r\n      \r\n\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nemail = (e) =>{\r\n\r\n  this.setState({eval:e})\r\n\r\n}\r\n\r\nTextBook = (term) =>{\r\n\r\n    this.setState({tbval:term})\r\n}\r\n\r\n\r\nuseful = (term) =>{\r\n\r\n  this.setState({uval:term})\r\n}\r\n\r\nDifficulty= (term) =>{\r\n\r\n    this.setState({dval:term})\r\n}\r\n\r\nTakeAgain= (term) =>{\r\n\r\n    this.setState({taval:term})\r\n}\r\n\r\nAbout= (term) =>{\r\n\r\n    this.setState({aval:term})\r\n}\r\n\r\n\r\n  codeChange  = (codeType) =>{\r\n\r\n    this.setState({code:codeType})\r\n\r\n  } \r\n\r\n  closeConfigShow = (closeOnEscape, closeOnDimmerClick) => () => {\r\n    this.setState({ closeOnEscape, closeOnDimmerClick, open: true })\r\n  }\r\n\r\n  ResetProfanity = () =>{\r\n\r\n    this.setState({Profanity:false})\r\n\r\n  }\r\n\r\n\r\n  send = async () =>{\r\n\r\n\r\n    \r\n    var profanity =  swearjar.profane(this.state.aval); \r\n    this.setState({Profanity:profanity})\r\n\r\n    if(this.state.aval.length > 600){\r\n      this.setState({error:1})\r\n    }\r\n\r\n    if(this.state.aval.length <=600 ){\r\n      this.setState({error:0})\r\n    }\r\n\r\n\r\n    console.log(this.state.Profanity)\r\n    console.log(profanity)\r\n\r\n\r\n    this.setState({\r\n      Profanity:profanity,\r\n      error: this.state.aval.length > 600?1:0\r\n  }, () => {\r\n    if(!this.state.Profanity && this.state.error==0){\r\n      const list = {\r\n        \"body\": this.state.aval,\r\n        \"email\":this.state.eval,\r\n        \"difficulty\":this.state.dval,\r\n        \"takeAgain\":this.state.taval,\r\n        \"isTextBook\":this.state.tbval,\r\n        \"thumbsUp\":this.state.up,\r\n        \"thumbsDown\":this.state.down,\r\n        \"id\":this.state.id,\r\n        \"useful\":this.state.uval\r\n      };\r\n    \r\n\r\n\r\n      this.sendEdit(list)\r\n      console.log(\"this happened\")\r\n      this.props.updateState(list)\r\n     \r\n  \r\n     this.close()\r\n    }\r\n\r\n\r\n  });\r\n\r\n\r\n\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  sendEdit =  async (list) => {\r\n\r\n\r\n    let res = await axios.get('/edit', {\r\n      params: {\r\n        courseTitle: this.props.Title,\r\n        review:list, \r\n        id:this.state.id\r\n    \r\n      }\r\n\r\n  \r\n    });\r\n\r\n\r\n\r\n  }\r\n\r\n\r\n  //SendEmail =  async () => {\r\n\r\n    // here you want to query the database, to send an email\r\n\r\n    //let res = await axios.get('/findid', {\r\n      //params: {\r\n      //  courseTitle: this.props.Title,\r\n    //    id:this.state.id\r\n      \r\n  \r\n  //  }\r\n\r\n  \r\n    \r\n  //}\r\n  \r\n\r\n  \r\nsendFeedback =  (templateId, variables) => {\r\n  window.emailjs.send(\r\n    'gmail', templateId,\r\n    variables\r\n    ).then(res => {\r\n      console.log('Email successfully sent!')\r\n    })\r\n    // Handle errors here however you like, or use a React error boundary\r\n    .catch(err => console.error('Oh well, you failed. Here some thoughts on the error that occured:', err))\r\n  }\r\n\r\n  SendEmail = async () => {\r\n  \r\n \r\n  \r\n    let res = await axios.get('/findid', {\r\n      params: {\r\n        courseTitle: this.props.Title,\r\n        id:this.state.id\r\n    }});\r\n\r\n    console.log(\"email would have sent\")\r\n    const templateId = 'template_swHMraBb';\r\n    this.sendFeedback(templateId, {message_html: this.state.id, from_name: \"David\", reply_to: res.data})\r\n\r\n    this.setState({sent:true})\r\n    // Here you need to send some kind of message, so that it says \"email sent sucessfully\"\r\n\r\n\r\n\r\n  }\r\n  \r\n\r\n  close = () => this.setState({ open: false, message:false, error:0, sent:false})\r\n  Submitclose = async () => {\r\n  \r\n \r\n  if(this.state.code == this.props.id){\r\n  this.setState({ message:true })\r\n  }else{\r\n\r\n    // Here you need to add logic to make it display some kind of error\r\n    //\r\n    this.setState({error:1})\r\n\r\n\r\n  }\r\n\r\n  \r\n \r\n  }\r\n\r\n  renderButton=()=>{\r\n    if(this.state.sent){\r\n      return;\r\n    }\r\n\r\n\r\n    if(this.state.message){\r\n\r\n        return(\r\n            <Modal.Actions>\r\n\r\n      <Button\r\n        onClick={this.send}\r\n        positive\r\n        labelPosition='right'\r\n        icon='checkmark'\r\n        content='Submit'\r\n        />\r\n              \r\n        </Modal.Actions>\r\n            );\r\n\r\n    }\r\n\r\n    if(!this.state.message){\r\n        return(\r\n        <Modal.Actions>\r\n        <center>\r\n        <Button\r\n        id=\"SWAG\"\r\n        onClick={this.Submitclose}\r\n        positive\r\n        labelPosition='right'\r\n        icon='checkmark'\r\n        content='Submit'\r\n        \r\n        />\r\n    \r\n    <Button\r\n        onClick={this.SendEmail}\r\n        id=\"SWAG\"\r\n        yellow\r\n        labelPosition='right'\r\n        icon='question circle outline'\r\n        content='Forgot Code?'\r\n        />\r\n\r\n    </center>\r\n\r\n  \r\n\r\n\r\n    </Modal.Actions>\r\n        );\r\n    }\r\n\r\n    \r\n\r\n\r\n  }\r\n\r\n\r\n\r\n  renderModal =  () =>{\r\n\r\n    if(this.state.sent){\r\n\r\n      return(\r\n\r\n\r\n        <Modal.Content>\r\n\r\n        Your edit code has been sent to your email!\r\n\r\n        </Modal.Content>\r\n\r\n\r\n    );\r\n\r\n\r\n    }\r\n\r\n\r\n    if(this.state.message){\r\n\r\n     \r\n\r\n      return(\r\n\r\n\r\n            <Modal.Content>\r\n\r\n\r\n  \r\n    \r\n                <Forms \r\n                tbval={this.props.data.isTextBook} \r\n                dval={this.props.data.difficulty} \r\n                taval={this.props.data.takeAgain}\r\n                eval={this.props.data.email}\r\n                aval={this.props.data.body} \r\n                uval={this.props.data.useful}\r\n                email={this.email}\r\n                useful={this.useful}\r\n                TextBook={this.TextBook}\r\n                Difficulty={this.Difficulty} \r\n                TakeAgain={this.TakeAgain}\r\n                About={this.About}\r\n                Profanity={this.state.Profanity}\r\n                Error={this.state.error}\r\n                ResetProfanity={this.ResetProfanity}\r\n                />\r\n    \r\n            </Modal.Content>\r\n    \r\n    \r\n        );\r\n\r\n    }\r\n\r\n\r\n\r\n    if(this.state.open){\r\n    return(\r\n\r\n        <Modal.Content>\r\n\r\n        <Form>\r\n\r\n        <center>\r\n        <Input  error={this.state.error } codeChange={this.codeChange}/>\r\n        </center>\r\n       \r\n\r\n        </Form>\r\n\r\n        </Modal.Content>\r\n\r\n\r\n\r\n    );\r\n    }\r\n\r\n   \r\n\r\n  }\r\n\r\n  render() {\r\n    const { open, closeOnEscape, closeOnDimmerClick } = this.state\r\n\r\n    \r\n\r\n\r\n\r\n    if(this.props.on == true){\r\n\r\n    return (\r\n\r\n                <div>\r\n                    <i onClick={this.closeConfigShow(false, true)}   class=\"pencil alternate icon large\"></i>\r\n                \r\n                    <Modal className=\"edit\"\r\n                    open={open}\r\n                    closeOnEscape={closeOnEscape}\r\n                    closeOnDimmerClick={closeOnDimmerClick}\r\n                    onClose={this.close}\r\n                    >\r\n                    <Modal.Header>  <center> Edit Post: Provide Edit Code! </center> </Modal.Header>\r\n                   {this.renderModal()}\r\n                \r\n                   {this.renderButton()}\r\n\r\n                    </Modal>\r\n\r\n                </div>\r\n                )\r\n            }\r\n\r\n                return(\r\n\r\n\r\n                    \r\n      <i class=\" large pen square  icon large \"></i>\r\n                );\r\n  }\r\n}\r\n\r\nexport default ModalExampleCloseConfig\r\n"]},"metadata":{},"sourceType":"module"}