{"ast":null,"code":"/*!\n* RAFManager v0.1.0\n*\n* Copyright 2018-2018, ajiemath <ajiemath@gmail.com>\n* Licensed under the MIT license\n* http://www.opensource.org/licenses/mit-license\n*\n*/\n!function (t, i) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = i() : \"function\" == typeof define && define.amd ? define(i) : t.RAFManager = i();\n}(this, function () {\n  \"use strict\";\n\n  return function () {\n    for (var t = [\"ms\", \"moz\", \"webkit\", \"o\"], i = 0; i < t.length && !window.requestAnimationFrame; ++i) window.requestAnimationFrame = window[t[i] + \"RequestAnimationFrame\"], window.cancelAnimationFrame = window[t[i] + \"CancelAnimationFrame\"] || window[t[i] + \"CancelRequestAnimationFrame\"];\n  }(), {\n    timer: 0,\n    state: \"stop\",\n    animations: [],\n    add: function (t) {\n      var i = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : 60,\n          n = {\n        callback: t,\n        fps: i,\n        n: 60 / i,\n        param: arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : null,\n        i: 0\n      };\n      return this.animations.push(n), this.animations.length >= 1 && this.start(), this;\n    },\n    getIndex: function (t) {\n      for (var i = 0; i < this.animations.length; i++) {\n        if (this.animations[i].callback === t) return i;\n      }\n\n      return -1;\n    },\n    remove: function (t) {\n      if (!(this.getIndex(t) < 0)) return this.deleteMap(t), 0 === this.animations.length && this.stop(), this;\n    },\n    deleteMap: function (t) {\n      var i = this.getIndex(t),\n          n = this.animations[i];\n\n      for (var e in n) delete n[e];\n\n      this.animations.splice(i, 1);\n    },\n    start: function () {\n      if (\"start\" !== this.state) return this.state = \"start\", this.tick(), this;\n    },\n    stop: function () {\n      if (\"stop\" !== this.state) return this.state = \"stop\", cancelAnimationFrame(this.timer), this;\n    },\n    tick: function () {\n      var t = this;\n      this.timer = requestAnimationFrame(function () {\n        t.tick();\n      });\n\n      for (var i = 0; i < this.animations.length; i++) {\n        var n = this.animations[i],\n            e = n.callback,\n            a = n.param;\n        n.i++, n.i >= n.n && (e(a), n.i = 0);\n      }\n    }\n  };\n});","map":{"version":3,"sources":["../src/RAFManager.js"],"names":["vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","fps","aniData","n","param","i","animations","push","this","start","getIndex","deleteMap","stop","index","key","splice","state","tick","timer"],"mappings":"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","sourcesContent":["/**\n *  RAFManager requestAnimationFrame Manager\n * \n *  Simple package\n * \n *  CODE:\n * \n * \t\t// Add to\n *  \t-- RAFManager.add(func);\n * \n *   \t// Add and carry parameters\n *  \t-- const func = data =>{ console.log(data) };\n *  \t-- RAFManager.add(func, 25, { msg:'hello world!' }); \n * \t\t\n * \t\t// remove\n *  \t-- RAFManager.remove(func);\n *  \t-- RAFManager.stop();\t\n*/\n\n// simple polyfill by https://gist.github.com/paulirish/1579671\n(function () {\n\tlet lastTime = 0;\n\tlet vendors = ['ms', 'moz', 'webkit', 'o'];\n\tfor (let x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n\t\twindow.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n\t\twindow.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame']\n\t\t\t|| window[vendors[x] + 'CancelRequestAnimationFrame'];\n\t}\n}());\n\nconst RAFManager = {\n\ttimer: 0,\n\tstate: 'stop',\n\tanimations: [],\n\n\tadd(callback, fps = 60, param = null) {\n\t\tconst n = 60 / fps;\n\t\tconst aniData = { callback, fps, n, param, i: 0 };\n\t\tthis.animations.push(aniData);\n\t\tif (this.animations.length >= 1) this.start();\n\n\t\treturn this;\n\t},\n\n\tgetIndex(callback) {\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tif (aniData.callback === callback) return i;\n\t\t}\n\n\t\treturn -1;\n\t},\n\n\tremove(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tif (index < 0) return;\n\n\t\tthis.deleteMap(callback);\n\t\tif (this.animations.length === 0) this.stop();\n\n\t\treturn this;\n\t},\n\n\tdeleteMap(callback) {\n\t\tconst index = this.getIndex(callback);\n\t\tconst aniData = this.animations[index];\n\t\tfor (let key in aniData) delete aniData[key];\n\n\t\tthis.animations.splice(index, 1);\n\t},\n\n\tstart() {\n\t\tif (this.state === 'start') return;\n\n\t\tthis.state = 'start';\n\t\tthis.tick();\n\t\treturn this;\n\t},\n\n\tstop() {\n\t\tif (this.state === 'stop') return;\n\n\t\tthis.state = 'stop';\n\t\tcancelAnimationFrame(this.timer);\n\t\treturn this;\n\t},\n\n\ttick() {\n\t\tthis.timer = requestAnimationFrame(() => { this.tick(); });\n\n\t\tfor (let i = 0; i < this.animations.length; i++) {\n\t\t\tconst aniData = this.animations[i];\n\t\t\tconst callback = aniData.callback;\n\t\t\tconst param = aniData.param;\n\n\t\t\taniData.i++;\n\t\t\tif (aniData.i >= aniData.n) {\n\t\t\t\tcallback(param);\n\t\t\t\taniData.i = 0;\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default RAFManager;"]},"metadata":{},"sourceType":"script"}